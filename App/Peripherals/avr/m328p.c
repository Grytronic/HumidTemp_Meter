/* --------------------------------------------------------------------------------------------------------------------------------------------*/ 
/* Author:      Lukasz Gryc                                                                                                                    */
/* File:        m328p.c                                                                                                                        */
/* Created:     21.04.2024                                                                                                                     */
/* Description: ATmega328p Interface HW Interface                                                                                              */
/* --------------------------------------------------------------------------------------------------------------------------------------------*/ 

/* Private includes ---------------------------------------------------------------------------------------------------------------------------*/ 
#include "m328p.h"

/* Private defines ----------------------------------------------------------------------------------------------------------------------------*/
/* Private types ------------------------------------------------------------------------------------------------------------------------------*/ 
/* Private consts -----------------------------------------------------------------------------------------------------------------------------*/ 
/* Private variables --------------------------------------------------------------------------------------------------------------------------*/ 
/* Extern variables ---------------------------------------------------------------------------------------------------------------------------*/
/* Private function declarations --------------------------------------------------------------------------------------------------------------*/ 
/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
/* Function definitions -----------------------------------------------------------------------------------------------------------------------*/ 


void M328P_peripherals_init(void)
{
    DIO_board_init();
    TWI_set_bitrate(100); //i2c initialisation
    ADC_init();
    TIM_init();
    #if((1 == USE_GPS) || (1 == DEBUG_MODE_ACTIVE))
	    UART_init(9600);
    #endif
}

void M328P_peripherals_enable_global_interrupts(void)
{
	sei();
}

int M328P_get_generated_random_value(void)
{
	return TIM1_get_generated_random_value();
}

void M328P_delay_ms(uint16_t delay)
{
   while (delay--) {_delay_ms(1);}
}

void M328P_delay_us(uint16_t delay)
{
   while (delay--) {_delay_us(1);}
}
